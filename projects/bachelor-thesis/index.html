
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Portfolio showcasing behavioural science projects and research illustrative of my work.">
      
      
        <meta name="author" content="Sofia Held">
      
      
      
        <link rel="prev" href="../portfolio-digital-transf/">
      
      
        <link rel="next" href="../masters-thesis/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Message Framing for Physical Activity - Sofia Held's Portfolio</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/overrides.css">
    
      <link rel="stylesheet" href="../../css/cards.css">
    
      <link rel="stylesheet" href="../../css/timeline.css">
    
      <link rel="stylesheet" href="../../css/cursor.css">
    
      <link rel="stylesheet" href="../../css/hero.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-impact-of-message-framing-in-physical-activity-bachelors-thesis" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Sofia Held&#39;s Portfolio" class="md-header__button md-logo" aria-label="Sofia Held's Portfolio" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sofia Held's Portfolio
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Message Framing for Physical Activity
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Sofia Held&#39;s Portfolio" class="md-nav__button md-logo" aria-label="Sofia Held's Portfolio" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Sofia Held's Portfolio
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Projects
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../portfolio-digital-transf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Change Management Project on Digital Transformation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Message Framing for Physical Activity
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Message Framing for Physical Activity
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#materials-and-data-collection" class="md-nav__link">
    <span class="md-ellipsis">
      Materials and Data Collection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Materials and Data Collection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-intervention-questionnaire" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Intervention Questionnaire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-intervention-questionnaire" class="md-nav__link">
    <span class="md-ellipsis">
      Post-Intervention Questionnaire
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intervention-material" class="md-nav__link">
    <span class="md-ellipsis">
      Intervention Material
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#procedure" class="md-nav__link">
    <span class="md-ellipsis">
      Procedure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mathematical-model-and-thesis" class="md-nav__link">
    <span class="md-ellipsis">
      Mathematical model and Thesis
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supplementary-code" class="md-nav__link">
    <span class="md-ellipsis">
      Supplementary Code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#results" class="md-nav__link">
    <span class="md-ellipsis">
      Results
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#impact" class="md-nav__link">
    <span class="md-ellipsis">
      Impact
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../masters-thesis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Increasing Vegetable Consumption in Children
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../redcare-internship/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    People Development Internship
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../caracol-internship/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Market Research Internship
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contact
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#materials-and-data-collection" class="md-nav__link">
    <span class="md-ellipsis">
      Materials and Data Collection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Materials and Data Collection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-intervention-questionnaire" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Intervention Questionnaire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-intervention-questionnaire" class="md-nav__link">
    <span class="md-ellipsis">
      Post-Intervention Questionnaire
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intervention-material" class="md-nav__link">
    <span class="md-ellipsis">
      Intervention Material
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#procedure" class="md-nav__link">
    <span class="md-ellipsis">
      Procedure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mathematical-model-and-thesis" class="md-nav__link">
    <span class="md-ellipsis">
      Mathematical model and Thesis
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supplementary-code" class="md-nav__link">
    <span class="md-ellipsis">
      Supplementary Code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#results" class="md-nav__link">
    <span class="md-ellipsis">
      Results
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#impact" class="md-nav__link">
    <span class="md-ellipsis">
      Impact
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="the-impact-of-message-framing-in-physical-activity-bachelors-thesis">The Impact of Message Framing in Physical Activity (Bachelor's Thesis)</h1>
<h2 id="overview">Overview</h2>
<p>In this project, I aimed to understand the impact of message framing on physical activity levels. To do this, I sent 2 different types of emails: positive, negative, (and also included a control group with no emails), and measured the difference in activity levels over a span of a month. In the end, no significant results were found, although I believe this reflects on the nature of the intervention rather than the overall effectivity of message framing.</p>
<details class="note">
<summary>More on the Data Collection and Procedure</summary>
<h2 id="materials-and-data-collection">Materials and Data Collection</h2>
<p>This study collected data through two online questionnaires administered via Google Forms—one before the intervention (<span class="arithmatex">\(T_1\)</span>) and one after (<span class="arithmatex">\(T_2\)</span>).</p>
<h3 id="pre-intervention-questionnaire">Pre-Intervention Questionnaire</h3>
<p>Participants first provided informed consent and reported basic demographic details (age, nationality, gender, academic major), along with disability status and whether they engaged in physical activity individually or in teams.</p>
<p>The questionnaire then assessed:</p>
<ul>
<li><strong>Self-efficacy</strong> using the <em>New General Self-Efficacy Scale</em> <a href="http://dx.doi.org/10.1037/t08800-000">(Chen et al., 2001)</a>, along with custom items inspired by the <em>Exercise Self-Efficacy Scale (ESES)</em> <a href="http://dx.doi.org/10.1186/1479-5868-4-34">(Kroll et al. 2007)</a>, tailored to the student context.</li>
<li><strong>Physical activity levels</strong> using the short version of the <em>International Physical Activity Questionnaire (IPAQ)</em> <a href="https://pubmed.ncbi.nlm.nih.gov/16925881/">(Hagströmer et al. 2006)</a>, adapted to capture data over the past month instead of the past 7 days. Activity was measured in MET-minutes/week:</li>
</ul>
<div class="arithmatex">\[
\begin{aligned}
\text{Walking MET-min/week} &amp;= 3.3 \times \text{avg. walking min/day} \times 7 \\
\text{Moderate MET-min/week} &amp;= 4.0 \times \text{avg. min/day} \times \text{moderate days} \\
\text{Vigorous MET-min/week} &amp;= 8.0 \times \text{avg. min/day} \times \text{vigorous days} \\
\text{Total MET-min/week} &amp;= \text{sum of all three}
\end{aligned}
\]</div>
<ul>
<li><strong>Attitudes toward physical activity</strong>, evaluated across four dimensions—<em>difficulty</em>, <em>relaxation</em>, <em>enjoyment</em>, and <em>healthiness</em>—adapted from <a href="http://dx.doi.org/10.1186/1471-2458-12-640">Poobalan et al. (2012)</a>, using a 5-point Likert scale (1 = strongly disagree to 5 = strongly agree).</li>
</ul>
<h3 id="post-intervention-questionnaire">Post-Intervention Questionnaire</h3>
<p>The second questionnaire replicated the first, measuring self-efficacy, physical activity, and attitudes again. An additional section evaluated the perceived effectiveness of the intervention (only for participants in the intervention groups).</p>
<hr />
<h2 id="intervention-material">Intervention Material</h2>
<p>Participants were assigned to one of three groups:</p>
<ul>
<li><strong>Gain-framed group</strong>: Received 10 motivational emails over 30 days highlighting the <em>benefits</em> of physical activity.</li>
<li><strong>Loss-framed group</strong>: Received 10 emails over 30 days emphasizing the <em>risks</em> of inactivity.</li>
<li><strong>Control group</strong>: Received no emails.</li>
</ul>
<p>Message content was adapted from <a href="http://dx.doi.org/10.1111/j.1751-9861.2004.tb00096.x">McCall et. al (2004)</a>, originally designed for cardiac rehab patients, and modified for a university student audience.</p>
<hr />
<h2 id="procedure">Procedure</h2>
<p>A hybrid sampling strategy was employed:</p>
<ul>
<li><strong>Convenience sampling</strong> at Constructor University targeting students aged 18–25.</li>
<li><strong>Snowball sampling</strong> through personal contacts in Colombia, primarily university students from the researcher's high school network.</li>
</ul>
<p>To encourage participation, the first email included a direct link to the consent form and initial questionnaire. After completing it, participants were randomly assigned to one of the three study groups.</p>
<p>The <strong>gain-</strong> and <strong>loss-framed</strong> groups received a new email every three days over a 30-day period. After the intervention period, all participants received a final email inviting them to complete the post-intervention questionnaire.</p>
<p>The study complied with ethical standards and ensured full confidentiality of participant data.</p>
</details>
<h2 id="mathematical-model-and-thesis">Mathematical model and Thesis</h2>
<p>In essence the idea behind the model is as follows. We used a moderation model, where the type of message (positive, negative, or control) was the independent variable, self-efficacy and attitudes towards physical activity were moderators, and the difference in physical activity over a period of a month was the dependent variable. In a flow chart, we can visualize this as</p>
<p><pre class="mermaid"><code>graph LR
  D{Self-Efficay} --&gt;|β| B;
  A --&gt; X((( )));
  D --&gt; X;
  X --&gt; |δ| B
  A[Message Framing] --&gt; |α| B[Change in Physical Activity];
  A --&gt; Y((( )));
  E --&gt; Y;
  Y --&gt; |ε| B;
  E{Attitudes} --&gt; |γ| B;</code></pre>
In particular, naming message framing as <span class="arithmatex">\(X\)</span>, the the moderators <span class="arithmatex">\(M_1\)</span> and <span class="arithmatex">\(M_2\)</span> for self-efficacy and attitudes respectively, and <span class="arithmatex">\(Y\)</span> for the change in physical activity, the model takes the form </p>
<div class="arithmatex">\[Y = c+ \alpha X + \beta M_1 + \gamma M_2 + \delta X \cdot M_1 + \varepsilon X \cdot M_2\]</div>
<p>for which I used a simple regression to find the optimum coefficients <span class="arithmatex">\(c, \alpha, \beta, \gamma,\delta, \varepsilon\)</span>. (Some extra work was needed as <span class="arithmatex">\(X\)</span> is really a categorical variable, and so it was encoded into dummy variables)</p>
<p>Here you can find my complete thesis.
 
<iframe src="../../assets/Bachelor_Thesis.pdf" width="90%" height="500px" style="border: none;"></iframe>
</p>
<h2 id="supplementary-code">Supplementary Code</h2>
<p>I needed coding for two main purposes: for the data analysis of the .csv files, and for the automatization of the emails. In particular, the code that I needed to run every day took care of:</p>
<ul>
<li>Update my csv file with users, writing down how many days deep in the interview each user was and identifying what are the resepctive procedures that needed to be implemented. </li>
<li>If a user finished the intervention (participated for over 30 days) remove them from the email list and place them in a different file to be used for the final survey</li>
<li>Else, check to which group the specific user belonged to and assign a message. A message was sent to a user every 3 days since they started the intervention, and it could be either gain-framing, loss-framing, or no message (if in control group)</li>
<li>Send the emails</li>
</ul>
<details class="info">
<summary>Show full code</summary>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">smtplib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">email.mime.text</span><span class="w"> </span><span class="kn">import</span> <span class="n">MIMEText</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>
<span class="c1">##  First define the macros SEND_EMAILS, INIT_SURVEY_PATH, FINAL_SURVEY_PATH,EMAILS_AND_GROUPS_PATH, OVER_30_PATH, SENDER, PASSWORD </span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">EmailObj</span><span class="p">:</span>
    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">body</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">def</span><span class="w"> </span><span class="nf">extract_subjects_and_bodies</span><span class="p">()</span><span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extracts the subjects and bodies from the .txt </span>
<span class="sd">    files and returns them as lists of strings.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: (subjects_text, bodies_text)</span>
<span class="sd">        With both being lists of 3 lists of 31 strings </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">subjects_text</span> <span class="o">=</span> <span class="p">[[],</span> <span class="p">[],</span> <span class="p">[]]</span>
    <span class="n">bodies_text</span> <span class="o">=</span> <span class="p">[[],</span> <span class="p">[],</span> <span class="p">[]]</span>
    <span class="k">for</span> <span class="n">group_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;subjects_group_</span><span class="si">{</span><span class="n">group_num</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
                <span class="c1"># Append each line (recipient) to the recipients list, removing leading/trailing whitespace</span>
                <span class="n">subjects_text</span><span class="p">[</span><span class="n">group_num</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;body_group_</span><span class="si">{</span><span class="n">group_num</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">bodies_text</span><span class="p">[</span><span class="n">group_num</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

    <span class="k">return</span> <span class="n">subjects_text</span><span class="p">,</span> <span class="n">bodies_text</span>


<span class="k">def</span><span class="w"> </span><span class="nf">match_emails_to_person</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">EmailObj</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Match the emails to the subjects and bodies corresponding to them </span>
<span class="sd">    depending on the group number and the number of days since the survey was filled.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[EmailObj]: list of EmailObj objects, for each entry in EMAILS_AND_GROUPS_PATH file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">subjects_text</span><span class="p">,</span> <span class="n">bodies_text</span> <span class="o">=</span> <span class="n">extract_subjects_and_bodies</span><span class="p">()</span>
    <span class="n">emails_groups_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">EMAILS_AND_GROUPS_PATH</span><span class="p">)</span>
    <span class="n">emailObjects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">emails_groups_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">email</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Email Address&#39;</span><span class="p">]</span>
        <span class="n">group_number</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Group Number&#39;</span><span class="p">]</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Timestamp&#39;</span><span class="p">]</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="s1">&#39;%m/</span><span class="si">%d</span><span class="s1">/%Y %H:%M:%S&#39;</span><span class="p">)</span>
        <span class="n">num_days</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">date</span><span class="p">)</span><span class="o">.</span><span class="n">days</span>
        <span class="n">subject</span> <span class="o">=</span> <span class="n">subjects_text</span><span class="p">[</span><span class="n">group_number</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">num_days</span><span class="p">]</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">bodies_text</span><span class="p">[</span><span class="n">group_number</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">num_days</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">email</span> <span class="o">==</span> <span class="s2">&quot;snmendozav@gmail.com&quot;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Email: </span><span class="si">{</span><span class="n">email</span><span class="si">}</span><span class="s2">, Group: </span><span class="si">{</span><span class="n">group_number</span><span class="si">}</span><span class="s2">, Days: </span><span class="si">{</span><span class="n">num_days</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="p">)</span>
        <span class="c1"># print(f&quot;Email: {email}, Group: {group_number}, Days: {num_days}, Subject: {subject}, Body: {body}&quot;)</span>
        <span class="k">if</span> <span class="n">subject</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">or</span> <span class="n">body</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">emailObjects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EmailObj</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">body</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">emailObjects</span>


<span class="k">def</span><span class="w"> </span><span class="nf">send_email</span><span class="p">(</span><span class="n">emailObjects</span><span class="p">:</span> <span class="n">EmailObj</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send an email to the recipients in the emailObjects list</span>

<span class="sd">    Args:</span>
<span class="sd">        emailObjects (EmailObj): EmailObj object to be sent in the email</span>
<span class="sd">        sender (str): Email address of the sender</span>
<span class="sd">        password (str): Password of the sender&#39;s email</span>

<span class="sd">    Returns:</span>
<span class="sd">        None: No return value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">emailObject</span> <span class="ow">in</span> <span class="n">emailObjects</span><span class="p">:</span>
        <span class="n">recipient</span> <span class="o">=</span> <span class="n">emailObject</span><span class="o">.</span><span class="n">email</span>
        <span class="n">subject</span> <span class="o">=</span> <span class="n">emailObject</span><span class="o">.</span><span class="n">subject</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">emailObject</span><span class="o">.</span><span class="n">body</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">MIMEText</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">)</span>
        <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;Subject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">subject</span>
        <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;From&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sender</span>
        <span class="n">msg</span><span class="p">[</span><span class="s1">&#39;To&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">recipient</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP_SSL</span><span class="p">(</span><span class="s1">&#39;smtp.gmail.com&#39;</span><span class="p">,</span> <span class="mi">465</span><span class="p">)</span> <span class="k">as</span> <span class="n">smtp_server</span><span class="p">:</span>
            <span class="n">smtp_server</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
            <span class="n">smtp_server</span><span class="o">.</span><span class="n">sendmail</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">recipient</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">as_string</span><span class="p">())</span>
            <span class="c1"># print(&quot;Message sent!&quot;)</span>
    <span class="k">return</span> <span class="kc">None</span>


<span class="k">def</span><span class="w"> </span><span class="nf">update_emails_and_groups</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates the emails_and_groups.csv file by adding the</span>
<span class="sd">    emails that are in the FINAL_SURVEY_PATH file</span>

<span class="sd">    Returns:</span>
<span class="sd">        None: No return value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">init_survey_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">INIT_SURVEY_PATH</span><span class="p">)</span>
    <span class="n">emails_groups_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">EMAILS_AND_GROUPS_PATH</span><span class="p">)</span>
    <span class="n">final_survey_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">FINAL_SURVEY_PATH</span><span class="p">)</span>
    <span class="n">over_30_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">OVER_30_PATH</span><span class="p">)</span>

    <span class="c1"># Iterate over the &quot;Email Address&quot; column in survey.csv</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">init_survey_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">email</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Email Address&#39;</span><span class="p">]</span>
        <span class="n">init_time</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Timestamp&#39;</span><span class="p">]</span>
        <span class="c1"># Check if the email exists in emails_and_groups.csv</span>
        <span class="k">if</span> <span class="n">email</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">emails_groups_df</span><span class="p">[</span><span class="s1">&#39;Email Address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>\
            <span class="ow">and</span> <span class="n">email</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">final_survey_df</span><span class="p">[</span><span class="s1">&#39;Email Address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>\
                <span class="ow">and</span> <span class="n">email</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">over_30_df</span><span class="p">[</span><span class="s1">&#39;Email Address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="c1"># Generate a random group number between 1 and 3</span>
            <span class="n">group_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Timestamp&#39;</span><span class="p">]</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="s1">&#39;%m/</span><span class="si">%d</span><span class="s1">/%Y %H:%M:%S&#39;</span><span class="p">)</span>
            <span class="n">num_days</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">date</span><span class="p">)</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>
            <span class="c1"># Add a new row to emails_and_groups_df</span>
            <span class="n">new_row</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Email Address&#39;</span><span class="p">:</span> <span class="n">email</span><span class="p">,</span>
                    <span class="s1">&#39;Timestamp&#39;</span><span class="p">:</span> <span class="n">init_time</span><span class="p">,</span>
                    <span class="s1">&#39;Group Number&#39;</span><span class="p">:</span> <span class="n">group_number</span><span class="p">,</span>
                    <span class="s1">&#39;Number of Days&#39;</span><span class="p">:</span> <span class="n">num_days</span><span class="p">}</span>
            <span class="n">emails_groups_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">emails_groups_df</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">new_row</span><span class="p">])],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">emails_groups_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">EMAILS_AND_GROUPS_PATH</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>


<span class="k">def</span><span class="w"> </span><span class="nf">find_over_30_days</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds the emails that have been in the EMAILS_AND_GROUPS_PATH</span>
<span class="sd">    file for over 30 days. Then removes them and reallocates them into the </span>
<span class="sd">    OVER_30_PATH file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None: No return value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">emails_groups_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">EMAILS_AND_GROUPS_PATH</span><span class="p">)</span>
    <span class="n">over_30_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">OVER_30_PATH</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">emails_groups_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">num_days</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Number of Days&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">num_days</span> <span class="o">&gt;</span> <span class="mi">32</span> <span class="ow">and</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Email Address&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">over_30_df</span><span class="p">[</span><span class="s1">&#39;Email Address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="n">newrow</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Email Address&#39;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Email Address&#39;</span><span class="p">],</span>
                    <span class="s2">&quot;Timestamp&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Timestamp&quot;</span><span class="p">],</span> <span class="s1">&#39;Group Number&#39;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Group Number&#39;</span><span class="p">]}</span>
            <span class="n">over_30_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">over_30_df</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">newrow</span><span class="p">])],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">emails_groups_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">over_30_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">OVER_30_PATH</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">emails_groups_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">EMAILS_AND_GROUPS_PATH</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>


<span class="k">def</span><span class="w"> </span><span class="nf">find_filled_final_survey</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds the emails that have filled the final survey and removes them</span>
<span class="sd">    from the OVER_30_PATH file. Then sends them an email with the final survey link</span>
<span class="sd">    to those that have not filled out the final survey and are in the OVER_30_PATH file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None: No return value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">over_30_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">OVER_30_PATH</span><span class="p">)</span>
    <span class="n">final_survey_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">FINAL_SURVEY_PATH</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">over_30_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">email</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;Email Address&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">email</span> <span class="ow">in</span> <span class="n">final_survey_df</span><span class="p">[</span><span class="s1">&#39;Email Address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="n">over_30_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span> 
            <span class="n">subject</span> <span class="o">=</span> <span class="s2">&quot;Final Step!&quot;</span>
            <span class="n">body</span> <span class="o">=</span> <span class="s2">&quot;Congratulations, you are almost there! To finalize this study (and participate in the raffle for the prize), please complete the following short survey: https://forms.gle/gSwfwrJHFtMmsMZC8</span><span class="se">\n\n</span><span class="s2"> Thank you for your participation!&quot;</span>
            <span class="k">if</span> <span class="n">SEND_EMAILS</span><span class="p">:</span>
                <span class="n">send_email</span><span class="p">([</span><span class="n">EmailObj</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">body</span><span class="p">)],</span> <span class="n">SENDER</span><span class="p">,</span> <span class="n">PASSWORD</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending email to: &quot;</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span>
                <span class="c1"># print(&quot;Subject: &quot;, subject)</span>
                <span class="c1"># print(&quot;Body: &quot;, body)</span>

    <span class="n">final_survey_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">FINAL_SURVEY_PATH</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">over_30_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">OVER_30_PATH</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> 
    <span class="k">return</span> <span class="kc">None</span>


<span class="k">def</span><span class="w"> </span><span class="nf">daily_process</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The process that needs to be run every day</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Update all the .csv files</span>
    <span class="n">update_emails_and_groups</span><span class="p">()</span>
    <span class="n">find_over_30_days</span><span class="p">()</span>
    <span class="n">find_filled_final_survey</span><span class="p">()</span>

    <span class="c1"># Match the emails to the subjects and bodies corresponding to them</span>
    <span class="n">emailObjects</span> <span class="o">=</span> <span class="n">match_emails_to_person</span><span class="p">()</span>
    <span class="c1"># Send the emails</span>
    <span class="k">if</span> <span class="n">SEND_EMAILS</span><span class="p">:</span> 
        <span class="n">send_email</span><span class="p">(</span><span class="n">emailObjects</span><span class="p">,</span> <span class="n">SENDER</span><span class="p">,</span> <span class="n">PASSWORD</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="k">for</span> <span class="n">emailObj</span> <span class="ow">in</span> <span class="n">emailObjects</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sending email to: &quot;</span><span class="p">,</span> <span class="n">emailObj</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>
</code></pre></div>
<p>This automatization was needed, as the sample size was large enough to make it unfeasable to send each email individually. </p>
</details>
<h2 id="results">Results</h2>
<p>The results obtained indicated no statistical significance in the intervention applied. Indeed, the participants which received negative and positive framing exhibited no significant difference in activity levels from the control group. This was further reinforced by the feedback obtained from the final survey: it was pointed out by several individuals that emails were not a very effective means of using framing, as a large portion of the subjects did not even read deeper into the messages or click on the links attached. </p>
<h2 id="impact">Impact</h2>
<p>While my results highlight that using emails as an intervention system was not an effective technique, it does not undermean the importance of framing in behavioral interventions. In fact, this should be considered in further interventions, and perhaps other methodologies (like mobile applications) should be adopted. In particular, my thesis was a step forward in understanding what type of behavioural interventions should be used to make an impact in the activity levels of students.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/sofiaheld24" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/sofiaheldr/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
      
        <script src="../../js/mermaid-init.js"></script>
      
        <script src="../../js/arrows.js"></script>
      
        <script src="../../js/cursor.js"></script>
      
    
  </body>
</html>